<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <title>dfgfire</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="dfgchiang">
    <meta name="description" content="Biogeographic Incident Observation/Insight Operation System">
    <meta name="generator" content="biosgis-20190927">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <script>
        IE = false;
        if (navigator.userAgent.indexOf('Trident') > 0) {
            IE = true;
            window.addEventListener('load', function() {
                document.getElementById('warning').style.display = 'block';
            });
        }
        DEFAULT_PAGE = 'index.html';

    </script>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://js.arcgis.com/4.13/esri/css/main.css">
    <script src="https://js.arcgis.com/4.13/"></script>
    <script src="https://dfgchiang.github.io/js/abc.js"></script>
    <script>
        var avn = 20191024;
        var bvn = ((avn - 20000000) / 10000).toFixed(2); //avn.toString().subst(2, 2) + '.' + avn.toString().subst(4, 2);
        var fullversion = bvn + '.' + avn.toString().substr(6, 2);
        var rv = (Math.random() * 10).toFixed(5);
        var ssid = 't' + Date.now() + 'r' + parseInt(rv * 10000); //parseInt(Math.random() * 1000000);//=SESSIONID
        var cssfiles = ['../css/main.css'];
        var jsfiles = ['../js/amd.js', '../js/biosf.js'];
        for (var i = 0; i < cssfiles.length; i++) {
            let x = document.createElement('link');
            x.setAttribute('rel', 'stylesheet');
            x.href = cssfiles[i] + '?' + rv;
            document.head.appendChild(x);
        }

        function addlibs(files, rv) {
            if (files.length === 0) {
                return;
            }
            let f = files.shift();
            let x = document.createElement('script');
            x.type = 'text/javascript';
            x.src = f + '?v=' + rv;
            x.onload = function() {
                addlibs(files, rv);
            }
            document.head.appendChild(x);
        }
        addlibs(jsfiles, rv);

        function testOidstr() {
            // TEST OIDstring length of 1..500 takes 1893 varchar column space
            var ar = [];
            for (var i = 1; i < 2001; i++) {
                ar.push(i);
            }
            return ar;
        }

        function testOfLoop() {
            // TEST SHOWS FOR-OF-LOOP ITERATION OF HTML COLLECTION FAILS IN IE&EDGE
            for (var x of document.getElementsByClassName('closer')) {
                x.style.border = '1px solid pink';
            }
        }

        function jtests() {
            //$('msgdiv').innerHTML = nup().toString();
            //testOfLoop();//FAIL-IE            
        }

        window.addEventListener('load', function() {
            console.log('DOM loaded');
            om = poplinks();
            $('bvn').innerHTML = 'v6.' + bvn;
            $('fullversion').innerHTML = fullversion;
            $('sessionid').innerHTML = ssid;
            //jtests();
            $('splash-ok').focus();
            hide('loadingbar');
        });

    </script>
</head>

<body>
    <header>
        <h1>Fire</h1>
    </header>
    <nav>
        <span class="esri-icon-drag-horizontal navtab" onclick="toggle('toolsbin')" title="Main menu"></span>
        <span class="esri-icon-settings2 navtab" onclick="navview('tools')" title="Tools"></span>
        <span class="esri-icon-layers navtab" onclick="navview('contents')" title="Contents"></span>
        <span class="esri-icon-collection navtab" onclick="navview('catalog')" title="Catalog"></span>
    </nav>
    <main>
        <div id="view3div"></div>
        <div id="viewdivide"></div>
        <div id="viewDiv"></div>
    </main>
    <aside id="bookmarks" class="wide" style="display: none;">
        <h3>
            <span class="esri-icon-bookmark"></span>
            BIOS Bookmarks
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h3>
        <div class="maindiv">
            <article>
                <h4 onclick="h4toggle(this)">
                    New or Currently Loaded Bookmark
                </h4>
                <div class="padded">
                    <div>
                        <label>Author</label>:
                        <input type="text" id="Author" value="" placeholder="Enter a name" required>
                        <label>Bookmark ID</label>:
                        <input type="text" id="BookmarkID" value="" placeholder="1234" title="If blank a new bookmark ID will be assigned when created" style="width: 80px;" readonly>
                    </div>
                    <div>
                        <label>Description</label>:
                        <input type="text" id="Description" value="" placeholder="Enter a brief description" style="max-width: 88%; min-width: 66%;" required>
                    </div>
                    <div>
                        <label>Tags</label>:
                        <input type="text" id="Tags" value="" placeholder="Enter some keywords to help search" required>
                    </div>
                    <input type="button" id="bb-create" value="Create New Bookmark">
                    <input type="button" id="bb-update" value="Save Current Edits" disabled="disabled">
                    <input type="button" id="bb-delete" value="Delete" disabled="disabled">
                    <div>
                        <span class="esri-icon-handle-horizontal detailsdots" id="bbdots"></span>
                        <div class="padded" style="display: none;">
                            <span class="esri-icon-close"></span>
                            <a href="./?bookmark=BOOKMARK_ID" id="bburl" target="_blank"></a>
                            All user bookmarks are saved for at least 60 days.
                            If no activity or views are recorded over 60 days,
                            the bookmark will be deleted. Please contact the
                            <a href="mailto:bios@wildlife.ca.gov">BIOS Team</a>
                            if you would like us to keep it longer.
                            External data links or pointers are saved similarly.
                        </div>
                    </div>
                </div>
            </article>
            <article>
                <h4 title="Browse Bookmarked Map Views or Data">
                    Browse
                    <input type="radio" id="bb-maps" name="bbtype" value="Maps" checked>
                    <label for="bb-maps">Existing Bookmarks</label> or
                    <input type="radio" id="bb-links" name="bbtype" value="Links">
                    <label for="bb-links">External Data</label>
                </h4>
                <div class="padded" style="position: relative;">
                    <input type="text" id="bbq" value="" placeholder="BookmarkIDs or search words">
                    <button type="button" id="bb-list" class="esri-icon-search" value="List">List</button>
                    <input type="button" id="bb-load" value="Load" title="Load bookmark">
                    <input type="button" id="bb-remove" value="Remove" title="Delete bookmarks by IDs">
                </div>
                <table id="bbtable" class="bbtable"></table>
            </article>
            <article>
                <h4>
                    <span class="esri-icon-edit"></span>
                    Edit Bookmark
                </h4>
                <div class="padded">
                    <div id="bb-form"></div>
                </div>
            </article>
        </div>
    </aside>
    <aside id="catalog" class="wide" style="display: none;">
        <h2>
            <span class="esri-icon-layers"></span>
            Catalog
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h2>
        <div class="maindiv">
            <article>
                <h3>
                    BIOS Data Catalog
                </h3>
                <div class="padded">
                </div>
            </article>
        </div>
    </aside>
    <aside id="contents" style="display: none;">
        <h2>
            <span class="esri-icon-layers"></span>
            Contents
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h2>
        <div class="maindiv">
            <article>
                <h3>
                    Reference Layers
                </h3>
                <div class="sublayers esri-widget">
                    <div class="sublayers-item" data-id="0">Cities</div>
                    <div class="sublayers-item" data-id="1">Highways</div>
                    <!--                    <div class="sublayers-item" data-id="4">Railroads</div>-->
                    <div class="sublayers-item" data-id="2">States</div>
                </div>
            </article>
        </div>
    </aside>
    <aside id="getdata" style="display: none;">
        <h3>
            <span class="esri-icon-down-arrow-circled"></span>
            Get Data
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h3>
        <div class="maindiv">
            <article>
                <h4>Add Layer Dynamically by URL</h4>
                <div class="padded">
                    <input type="text" id="addurl" value="" placeholder="Map or feature service or file URL" style="width: 90%;">
                </div>
            </article>
        </div>
    </aside>
    <aside id="help" style="display: none;">
        <h3>
            <span class="esri-icon-question"></span>
            Help
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h3>
        <div class="maindiv">
            <div class="padded">
                AIOS Version: <span id="fullversion"></span>
            </div>
            <article class="">
                <h4>References and Resources</h4>
                <ol>
                    <li>
                        <a href="https://developers.arcgis.com/javascript/latest/guide/esri-icon-font/index.html" title="Esri Icon Font (Calcite theme) 20180621"></a>
                    </li>
                    <li>
                        <a href="../jsapis.html">JS APIs</a>
                    </li>
                    <li>
                        <a href="../mads.html">Maps, apps, and data sources</a>
                    </li>
                </ol>
            </article>
            <article class="">
                <h4>Sites and Services</h4>
                <div class="padded">
                    <a href="https://map.dfg.ca.gov/arcgis"></a>
                </div>
            </article>
            <article>
                <h4>
                    Contact &amp; Info
                </h4>
                <div class="padded">
                    @<a href="mailto:dfgchiang@gmail.com" title="Contact">dfgchiang</a>
                    <details>
                        <summary>Info</summary>
                        <script>
                            var brk = '<br>';
                            document.write('&copy;' + document.lastModified + brk);
                            document.write('&bull; URL Referer: ' + document.referrer + brk);
                            document.write('&diams; Browser Client: ' + navigator.userAgent + ' on ' + navigator.platform + brk);
                            document.write('&rect; Window Size: ' + window.innerWidth + 'x' + window.innerHeight + brk);

                        </script>
                    </details>
                </div>
            </article>
        </div>
    </aside>
    <aside id="identify" style="display: none;">
        <h3>
            <span class="esri-icon-description"></span>
            Identify
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h3>
        <div class="maindiv">
            <article class="">
                <h4>Identify Results</h4>
                <ol>
                </ol>
                <div class="padded">
                </div>
            </article>
        </div>
    </aside>
    <aside id="legendbar" style="display: none;">
        <h3>
            <span class="esri-icon-layer-list"></span>
            Layer Legend
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h3>
        <div class="maindiv">
            <div id="legendDiv" class="padded">
            </div>
        </div>
    </aside>
    <aside id="pointinfo" style="display: none;">
        <h3>
            <span class="esri-icon-blank-map-pin"></span>
            Point Info
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h3>
        <div class="maindiv"></div>
    </aside>
    <aside id="gselect" style="display: none;">
        <h3>
            Select and Filter
            <span class="esri-icon-close closer" style="cursor: default; float: right; font-size: 1.23em;" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h3>
        <div class="maindiv">
            <article class="">
                <h4>
                    Attribute Query
                </h4>
                <div class="centered margined padded">
                    <textarea id="sql-where" name="sql" rows="8" cols="40"></textarea>
                    <button type="button" name="button" id="sql-go">Run</button>
                </div>
            </article>
            <article class="">
                <h4>
                    Geographic Selection
                </h4>
                <div class="centered margined padded">
                    <input type="range" id="buffr" name="buffer" min="0" max="10000" style="position: relative; width: 80%;">
                    <input type="text" id="buffd" name="buffer" value="">
                    <label for="buffd">meters</label>
                </div>
            </article>
        </div>
    </aside>
    <aside id="tools" style="display: none;">
        <h2>
            <span class="esri-icon-settings2"></span>
            Tools
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h2>
        <div class="maindiv">
            <ol class="menu">
                <li onclick="navview('bookmarks')" title="BiosBookmarks">
                    <span class="esri-icon-bookmark"></span>
                    <label>BIOS Bookmarks</label>
                </li>
                <li onclick="navview('getdata')" title="Get Data">
                    <span class="esri-icon-down-arrow-circled"></span>
                    <label>Get Data</label>
                </li>
                <li onclick="navview('help')" title="Help Guide">
                    <span class="esri-icon-question"></span>
                    <label>Help</label>
                </li>
                <li onclick="navview('identify')" title="Identify">
                    <span class="esri-icon-description"></span>
                    <label>Identify</label>
                </li>
                <li onclick="navview('viewDiv');" title="Maximize 2D Map">
                    <span class="esri-icon-maps"></span>
                    <label>Map (2D)</label>
                </li>
                <li onclick="navview('view3div')" title="3D Scene">
                    <span class="esri-icon-globe"></span>
                    <label>Scene (3D)</label>
                </li>
                <li onclick="navview('pointinfo')">
                    <span class="esri-icon-blank-map-pin"></span>
                    <label>Point Info</label>
                </li>
                <li onclick="navview('gselect')" title="Select and Filter">
                    <span class="esri-icon-cursor"></span>
                    <label>Select &amp; Filter</label>
                </li>
                <li onclick="navview('msgbar')" title="Messages">
                    <span class="esri-icon-dock-bottom"></span>
                    <label>Messages</label>
                </li>
            </ol>
        </div>
    </aside>
    <section id="databar" style="display: none;">
        <h2>
            <span class="esri-icon-menu" style="border: 1px solid white;"></span>
            Data
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h2>
        <div id="msgdiv" class="maindiv"></div>
    </section>
    <section id="gtablebar" style="display: none;">
        <h2>
            <span class="esri-icon-table"></span>
            Table
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h2>
        <div id="msgdiv" class="maindiv">
            <div id="gtablediv"></div>
        </div>
    </section>
    <section id="msgbar" style="display: none;">
        <h2>
            Messages
            <script>
                document.write(document.lastModified);

            </script>
            <span id="sessionid" style="margin-left: 1%;"></span>
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h2>
        <div id="msgdiv" class="maindiv"></div>
    </section>
    <footer style="display: none;">
        <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a><br />This work
        is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons
            Attribution-NonCommercial 4.0 International License</a>
    </footer>
    <div id="loadingbar">
        Loading...
        <span class="esri-icon-close closer" onclick="this.parentNode.style.display = 'none'"></span>
    </div>
    <aside id="toolsbin" class="auto" style="display: none;">
        <h2>
            <span class="esri-icon-settings2"></span>
            Main Menu
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display='none'"></span>
        </h2>
        <div class="maindiv">
            <ol class="menu" onclick="this.parentNode.parentNode.style.display='none'">
                <li onclick="navview('bookmarks')" title="BiosBookmarks">
                    <span class="esri-icon-bookmark"></span>
                    <label>BIOS Bookmarks</label>
                </li>
                <li onclick="navview('catalog')" title="Catalogs">
                    <span class="esri-icon-collection"></span>
                    <label>Catalog</label>
                </li>
                <li onclick="navview('contents')" title="Layers">
                    <span class="esri-icon-layers"></span>
                    <label>Contents</label>
                </li>
                <li onclick="navview('databar')">
                    <span class="esri-icon-menu"></span>
                    <label>Data Table</label>
                </li>
                <li onclick="navview('getdata')" title="Get Data">
                    <span class="esri-icon-down-arrow-circled"></span>
                    <label>Get Data</label>
                </li>
                <li onclick="navview('help')" title="Help Guide">
                    <span class="esri-icon-question"></span>
                    <label>Help</label>
                </li>
                <li onclick="navview('identify')" title="Identify">
                    <span class="esri-icon-description"></span>
                    <label>Identify</label>
                </li>
                <li onclick="navview('viewDiv');" title="Maximize 2D Map">
                    <span class="esri-icon-maps"></span>
                    <label>Map (2D)</label>
                </li>
                <li onclick="navview('view3div')" title="3D Scene">
                    <span class="esri-icon-globe"></span>
                    <label>Scene (3D)</label>
                </li>
                <li onclick="navview('pointinfo')">
                    <span class="esri-icon-blank-map-pin"></span>
                    <label>Point Info</label>
                </li>
                <li onclick="navview('gtablebar')">
                    <span class="esri-icon-table"></span>
                    <label>Table</label>
                </li>
                <li onclick="navview('gselect')" title="Select and Filter">
                    <span class="esri-icon-cursor"></span>
                    <label>Selection &amp; Filtering</label>
                </li>
                <li onclick="navview('tools')" title="Tools">
                    <span class="esri-icon-settings2"></span>
                    <label>Tools</label>
                </li>
                <li onclick="navview('msgbar')" title="Messages">
                    <span class="esri-icon-dock-bottom"></span>
                    <label>Messages</label>
                </li>
            </ol>
        </div>
    </aside>
    <section id="splash" class="centered" style="border: 5px solid thistle; border-radius: 5px; bottom: 10%; left: 5%; right: 5%; width: auto;">
        <h2>
            Operational Map <span id="bvn"></span>
            <span class="esri-icon-close closer" onclick="this.parentNode.parentNode.style.display = 'none'"></span>
        </h2>
        <div class="maindiv" style="height: 88%;">
            <article>
                <h3>Biogeographic Incident Obsevation System</h3>
                <div class="margined">
                    <p></p>
                </div>
                <div class="padded">
                    <button id="splash-ok" type="button" name="button" onclick="hide('splash')">OK</button>
                </div>
            </article>
            <a id="cagov-link" style="position: absolute; bottom: 10px; left: 10px;" href="https://www.ca.gov/" target="_blank">
                <img id="cagov-img" style="height: 50px;" alt="CA.gov" src="https://portal-california.azureedge.net/wp-content/uploads/2018/11/ca.gov-portal-logo-bear.png">
            </a>
        </div>
    </section>
    <div id="warning" style="display: none;">
        WARNING: Operational Map viewer is not supported on Microsoft Internet Explorer
        (IE) browser and may not perform as expected. We recommend that you use
        a recent version of Chrome, Firefox, or Safari.
        <span class="esri-icon-close closer" onclick="hidex(this.parentNode)"></span>
    </div>
</body>

</html>
<!--
    Copyright © 2019, [California Department of Fish and Wilfelife](https://wildlife.ca.gov/)
    [CDFW Condition of Use](https://www.wildlife.ca.gov/Conditions-of-Use)
    [MIT License](https://mit-license.org/)
    [GNU GPL v3](https://www.gnu.org/licenses/)
    [BSD 3-Clause](https://opensource.org/licenses/BSD-3-Clause)
    [open-license](https://project-open-data.cio.gov/open-licenses/)
    [Creative Commons (CC)](http://creativecommons.org/licenses/by-nc/4.0/)
    [FreeBSD License](https://www.freebsd.org/copyright/freebsd-license.html)
    [OpenGov3](https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/)
-->
